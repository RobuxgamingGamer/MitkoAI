<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MitkoAI-mini</title>

<style>
/* =========================
   GLOBAL THEME (REGENERATED)
========================= */
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background: radial-gradient(circle at top, #0a0f1e, #02030a);
  color: #eaf2ff;
  overflow: hidden;
}

/* =========================
   HEADER
========================= */
header {
  padding: 14px;
  text-align: center;
  font-weight: 900;
  letter-spacing: 0.6px;
  background: linear-gradient(135deg, #1e3cff, #4da3ff);
  color: #000;
  box-shadow: 0 6px 20px rgba(77,163,255,0.6);
}

/* =========================
   TABS
========================= */
#tabs {
  display: flex;
  background: #060b18;
}

.tab {
  flex: 1;
  padding: 12px;
  text-align: center;
  cursor: pointer;
  font-weight: 700;
  opacity: 0.6;
}

.tab.active {
  opacity: 1;
  color: #4da3ff;
  border-bottom: 2px solid #4da3ff;
}

/* =========================
   VIEWS
========================= */
.view {
  display: none;
  height: calc(100vh - 140px);
  overflow-y: auto;
  padding: 16px;
}

.view.active { display: block; }

/* =========================
   CHAT BUBBLES
========================= */
.bubble {
  max-width: 75%;
  padding: 14px 18px;
  margin: 10px 0;
  border-radius: 16px;
  line-height: 1.45;
  animation: pop 0.15s ease;
}

@keyframes pop {
  from { opacity: 0; transform: scale(0.97); }
  to { opacity: 1; transform: scale(1); }
}

.user {
  margin-left: auto;
  background: linear-gradient(135deg, #2b5cff, #4da3ff);
  box-shadow: 0 0 14px rgba(77,163,255,0.6);
}

.ai {
  background: linear-gradient(135deg, #0b1a33, #102b55);
  border: 1px solid #4da3ff;
  box-shadow: 0 0 18px rgba(77,163,255,0.45);
}

/* =========================
   INPUT BAR
========================= */
#inputBar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  gap: 10px;
  padding: 12px;
  background: rgba(5,10,25,0.96);
  border-top: 1px solid #2b5cff;
}

#userInput {
  flex: 1;
  padding: 14px;
  border-radius: 14px;
  border: none;
  outline: none;
  background: #0b1428;
  color: #eaf2ff;
}

button {
  padding: 14px 18px;
  border-radius: 14px;
  border: none;
  font-weight: 700;
  background: linear-gradient(135deg, #2b5cff, #4da3ff);
  color: #fff;
}

/* =========================
   IMAGE TOOLS
========================= */
.toolBox {
  background: #0b1428;
  border: 1px solid #4da3ff;
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 14px;
}

.preview {
  margin-top: 10px;
  max-width: 100%;
  border-radius: 10px;
  border: 1px solid #4da3ff;
}
</style>
</head>

<body>

<header>MitkoAI-mini ‚Äî Extended Interface</header>

<div id="tabs">
  <div class="tab active" onclick="switchTab('chat')">Chat</div>
  <div class="tab" onclick="switchTab('imageGen')">Image Gen</div>
  <div class="tab" onclick="switchTab('imageRead')">Image Read</div>
</div>

<!-- CHAT -->
<div id="chat" class="view active">
  <div class="bubble ai">
    MitkoAI-mini online.<br>
    Swipe left/right on chat to switch modes.
  </div>
</div>

<!-- IMAGE GENERATOR -->
<div id="imageGen" class="view">
  <div class="toolBox">
    <b>üñºÔ∏è Image Generator (Prompt-Based)</b><br><br>
    <input id="imgPrompt" placeholder="Describe an image‚Ä¶" style="width:100%;padding:10px;border-radius:10px;border:none;">
    <button style="margin-top:10px;width:100%;" onclick="generateImage()">Generate Prompt</button>
    <div id="imgResult" style="margin-top:10px;"></div>
  </div>
</div>

<!-- IMAGE READER -->
<div id="imageRead" class="view">
  <div class="toolBox">
    <b>üì∑ Image Reader</b><br><br>
    <input type="file" accept="image/*" onchange="readImage(event)">
    <img id="preview" class="preview">
    <div id="imgInfo" style="margin-top:10px;"></div>
  </div>
</div>

<!-- INPUT -->
<div id="inputBar">
  <input id="userInput" placeholder="Type a message‚Ä¶" />
  <button onclick="sendMessage()">Send</button>
</div>

<script>
/* =========================
   MEMORY
========================= */
const memory = [];

/* =========================
   CHAT CORE
========================= */
const chat = document.getElementById("chat");
const input = document.getElementById("userInput");

function addBubble(text, type) {
  const div = document.createElement("div");
  div.className = "bubble " + type;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

/* =========================
   SWIPE NAVIGATION
========================= */
let startX = 0;

document.addEventListener("touchstart", e => {
  startX = e.touches[0].clientX;
});

document.addEventListener("touchend", e => {
  const dx = e.changedTouches[0].clientX - startX;
  if (dx > 80) cycleTab(-1);
  if (dx < -80) cycleTab(1);
});

function cycleTab(dir) {
  const tabs = ["chat","imageGen","imageRead"];
  let current = tabs.findIndex(t => document.getElementById(t).classList.contains("active"));
  let next = (current + dir + tabs.length) % tabs.length;
  switchTab(tabs[next]);
}

/* =========================
   TABS
========================= */
function switchTab(name) {
  document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
  document.querySelectorAll(".view").forEach(v => v.classList.remove("active"));
  document.getElementById(name).classList.add("active");
  document.querySelector(`.tab[onclick*="${name}"]`).classList.add("active");
}

/* =========================
   MATH + CHAT LOGIC
========================= */
function respond(text) {
  memory.push(text);
  if (/^[0-9+\-*/(). ]+$/.test(text)) {
    try {
      return `üßÆ ${text} = ${Function("return "+text)()}`;
    } catch {
      return "‚ùå Invalid math expression.";
    }
  }
  if (text.toLowerCase().includes("who are you"))
    return "I am MitkoAI-mini. A stable interface with logic, memory, and tools.";
  return "Understood. Continue.";
}

/* =========================
   SEND
========================= */
function sendMessage() {
  const text = input.value.trim();
  if (!text) return;
  addBubble(text, "user");
  input.value = "";
  setTimeout(() => addBubble(respond(text), "ai"), 300);
}

/* =========================
   IMAGE GENERATOR
========================= */
function generateImage() {
  const prompt = document.getElementById("imgPrompt").value;
  document.getElementById("imgResult").innerText =
    `üñºÔ∏è Prompt created:\n"${prompt}"\n\nUse this prompt in image AI tools (DALL¬∑E, SD, Bing).`;
}

/* =========================
   IMAGE READER
========================= */
function readImage(e) {
  const file = e.target.files[0];
  if (!file) return;
  const img = document.getElementById("preview");
  img.src = URL.createObjectURL(file);
  document.getElementById("imgInfo").innerText =
    `üì∑ File: ${file.name}\nType: ${file.type}\nSize: ${(file.size/1024).toFixed(1)} KB`;
}
</script>

</body>
</html>