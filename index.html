<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MitkoAI 0.3</title>

<style>
/* =========================
   GLOBAL THEME (REGENERATED)
========================= */
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background: radial-gradient(circle at top, #0a0f1e, #02030a);
  color: #eaf2ff;
  overflow: hidden;
}

/* =========================
   HEADER
========================= */
header {
  padding: 14px;
  text-align: center;
  font-weight: 900;
  letter-spacing: 0.6px;
  background: linear-gradient(135deg, #1e3cff, #4da3ff);
  color: #000;
  box-shadow: 0 6px 22px rgba(77,163,255,0.6);
}

/* =========================
   CHAT AREA
========================= */
#chat {
  height: calc(100vh - 110px);
  overflow-y: auto;
  padding: 16px;
}

/* =========================
   BUBBLES
========================= */
.bubble {
  max-width: 75%;
  padding: 14px 18px;
  margin: 10px 0;
  border-radius: 16px;
  line-height: 1.45;
}

.user {
  margin-left: auto;
  background: linear-gradient(135deg, #2b5cff, #4da3ff);
  box-shadow: 0 0 14px rgba(77,163,255,0.6);
}

.ai {
  background: linear-gradient(135deg, #0b1a33, #102b55);
  border: 1px solid #4da3ff;
  box-shadow: 0 0 18px rgba(77,163,255,0.45);
}

/* =========================
   INPUT BAR
========================= */
#inputBar {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  display: flex;
  gap: 10px;
  padding: 12px;
  background: rgba(5,10,25,0.96);
  border-top: 1px solid #2b5cff;
}

#userInput {
  flex: 1;
  padding: 14px;
  border-radius: 14px;
  border: none;
  outline: none;
  background: #0b1428;
  color: #eaf2ff;
}

button {
  padding: 14px 18px;
  border-radius: 14px;
  border: none;
  font-weight: 700;
  background: linear-gradient(135deg, #2b5cff, #4da3ff);
  color: #fff;
}
</style>
</head>

<body>

<header>MitkoAI 0.3 â€” Rule-Layered Intelligence</header>

<div id="chat">
  <div class="bubble ai">
    MitkoAI 0.3 online.<br>
    Rule-based reasoning active. Safety enabled.
  </div>
</div>

<div id="inputBar">
  <input id="userInput" placeholder="Type a messageâ€¦" />
  <button onclick="sendMessage()">Send</button>
</div>

<script>
/* =========================
   MEMORY (SESSION)
========================= */
const memory = [];
const MAX_MEMORY = 10;

/* =========================
   CHAT HELPERS
========================= */
const chat = document.getElementById("chat");
const input = document.getElementById("userInput");

function addBubble(text, type) {
  const div = document.createElement("div");
  div.className = "bubble " + type;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

/* =========================
   SAFETY
========================= */
function isUnsafe(t) {
  if (t.includes("hack")) return true;
  if (t.includes("kill")) return true;
  if (t.includes("bomb")) return true;
  if (t.includes("suicide")) return true;
  if (t.includes("address")) return true;
  if (t.includes("password")) return true;
  return false;
}

/* =========================
   MATH ENGINE (STRICT)
========================= */
function normalizeMath(t) {
  return t
    .replace(/how much is|what is|calculate|solve|equals|=/g, "")
    .replace(/plus/g, "+")
    .replace(/minus/g, "-")
    .replace(/times|multiplied by|x/g, "*")
    .replace(/divided by|over/g, "/")
    .replace(/\s+/g, "")
    .trim();
}

function isMath(t) {
  const e = normalizeMath(t);
  if (e === "") return false;
  return /^[0-9+\-*/().]+$/.test(e);
}

function computeMath(t) {
  const e = normalizeMath(t);
  try {
    const r = Function(`"use strict";return (${e})`)();
    return `ðŸ§® Calculation result:\n${e} = ${r}\n\nThis follows the standard order of operations.`;
  } catch {
    return "âŒ I could not calculate that expression.";
  }
}

/* =========================
   BIG NUMBER EXPLANATIONS
========================= */
function bigNumbers(t) {
  if (t.includes("infinity"))
    return "â™¾ï¸ Infinity is not a number. It represents something without an end.";

  if (t.includes("graham"))
    return "ðŸ¤¯ Grahamâ€™s number is a finite number so large that it cannot be written or stored in the universe.";

  if (t.includes("tree"))
    return "ðŸŒ³ TREE(3) comes from graph theory and is vastly larger than Grahamâ€™s number.";

  if (t.includes("busy") || t.includes("b("))
    return "ðŸ–¥ï¸ Busy Beaver numbers describe the limits of computation and grow faster than any computable function.";

  return null;
}

/* =========================
   RESPONSE ENGINE (IF-LAYERS)
========================= */
function respond(raw) {
  const t = raw.toLowerCase();
  memory.push(t);
  if (memory.length > MAX_MEMORY) memory.shift();

  /* ---- SAFETY LAYER ---- */
  if (isUnsafe(t)) {
    return "âš ï¸ I canâ€™t help with unsafe, illegal, or personal information.";
  }

  /* ---- BIG NUMBERS ---- */
  const big = bigNumbers(t);
  if (big) return big;

  /* ---- MATH ---- */
  if (isMath(t)) {
    return computeMath(t);
  }

  /* ---- IDENTITY ---- */
  if (t === "who are you" || t.includes("your name")) {
    return "I am MitkoAI 0.3 â€” a rule-based assistant focused on logic, safety, and clarity.";
  }

  /* ---- STATUS ---- */
  if (t.includes("how are you")) {
    return "I am operational and stable.";
  }

  /* ---- MEMORY ---- */
  if (t.includes("memory") || t.includes("remember")) {
    return `I currently remember ${memory.length} recent messages in this session.`;
  }

  /* ---- HELP ---- */
  if (t === "help" || t.includes("what can you do")) {
    return "I can calculate math, explain large numbers, respond logically, and maintain short-term memory.";
  }

  /* ---- CONFIRMATIONS ---- */
  if (t === "ok" || t === "okay" || t === "alr") {
    return "Acknowledged.";
  }

  if (t === "yes") {
    return "Confirmed.";
  }

  if (t === "no") {
    return "Understood.";
  }

  /* ---- QUESTIONS ---- */
  if (t.startsWith("why")) {
    return "That depends on context. Provide more detail and I will analyze it.";
  }

  if (t.startsWith("how")) {
    return "Describe the situation more precisely so I can respond accurately.";
  }

  /* ---- DEFAULT FALLBACK (CONTROLLED) ---- */
  return "Input received. Continue.";
}

/* =========================
   SEND
========================= */
function sendMessage() {
  const text = input.value.trim();
  if (!text) return;

  addBubble(text, "user");
  input.value = "";

  setTimeout(() => {
    addBubble(respond(text), "ai");
  }, 250);
}
</script>

</body>
</html>